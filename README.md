# Hanabi-discard
WIP Discard Convention

The idea of this convention is that players tell other players that they have a playable card by discarding a card in the same slot. Clues are used mostly to save valuable cards (not necessarily critical) from discards. Combined with the good touch principle, as the game progresses a lot of "saved" cards will be known as playable, thus the end-game usually does not require too many discards. 


# 0. Modals

a- MUST refers to a rule that should always be followed. Players MUST assume that a rule containing "MUST" is followed. They will know something is up if the rule is not followed. 

b- MUST NOT refers to a situation that MUST be avoided. 

e- SHOULD refer to a rule that should preferably be followed when no clear preference occurs between two options. SHOULD NOT refer to a situation that SHOULD be avoided. 

d- MAY refer to a decision that a player is free to take. (?? Priority ??)


# 1. Valuable cards

a- A card is critical if it has exactly one copy remaining. 
Ex: at the beginning of the game, only 5 are critical.

b- A card is valuable if it must be played in the future, and no other copy of it have already been clued or play-hinted (See Section "Play hints" for a definition).

c- A card is trash if it has already been played. It is known trash if the player who has it in hand knows it is trash.

d- When determining which card to save first, critical cards SHOULD be saved first, then valuable cards. Cards that are closer to playable SHOULD be saved first. 


# 2. General principles

a- Always Play Principle: if you know that one of your cards is playable, you MUST play. Any delay sends a message to your partners. 
* It is the other players’ responsibility to ensure that critical cards will not be discarded. 

b- Minimum clue value principle (MCVP): a clue MUST bring new information to the team. Players MUST NOT give a play-hint that only affects already play-hinted cards. We have special rules when no "useful" move is possible, see "Trash clues".

c- Good touch principle (GTP): cards that receive clues SHOULD, as much as possible, be valuable. Exception can and will occur (Ex: someone clues the duplicate of a valuable card that is already clued in their hand), but MUST be avoided whenever possible. 
 * not letting a player who is likely to break the GTP a chance to do so is good form and MUST/SHOULD be done. Ex: someone who is likely to clue a card that is already clued in their hand. 

d- 
* ?? Save principle ??
* ?? Priority between principles ??


# 3. Play order

a- Players will inform each other of which cards are playable through play hints (see Section "Play hints"). Sometimes, cards will receive enough clues to be identifiable, in which case the owner of the card should know to play it.

b- When a player knows that at least a card in their hand is playable, they MUST play.

c- When a player received multiple play hints, the play hints MUST be resolved in the order in which they were received.

d- When a player has a mix of play hints and known cards, known cards MUST be played first. 
 * This allow other players to clue subsequent cards with play hints.
 * If a card is filled-in and is revealed playable while the owner still had play-hints to resolve, the owner MUST interrupt the sequence of play-hints to play the revealed card. Indeed, the next play-hint may require this revealed card to be played first. 
 * If the other players do not want the play order to be changed, they should delay revealing the card to its owner. 

e- When giving play hints, players MUST assume that one player’s play hints will be resolved no matter what other players do. In particular, they MUST NOT assume that a player will wait for another card to be played. 
 * Ex1: g1 is played. Bob has g2, Cathy has g3. Alice MUST NOT play-hint the g3. 
 * Ex2: g1 is played. Bob has a play-hinted g2, Cathy has g3. Alice MAY hint g3, because Bob will play g2 before Cathy, making the g3 playable. 

f- If a player with a play hint did NOT play, it means something very urgent has come up. The next players with play hints should use their discretion to know whether to play or delay. 

g- cf. special rules "Letting the clue tick" (4f). 


# 4. Play hints

a- To indicate that a card is playable, a player MAY either
 * discard their card in the same slot, 
 * clue a valuable card in a player’s hand.

b- Players MUST NOT
 * "fill-in" a card to inform their owner that it is playable if this is not a valid play-hint, or otherwise a valid move. 
 * clue a non-valuable card. When a non-valuable card is clued, another interpretation is needed. See "Trash Clues" for the current suggestion. 
 
c- When play-hinting a card, players SHOULD, in order of preference,
 * clue a valuable card,
 * if impossible / impractical, discard,
 * if impossible / dangerous, clue the play-hinted card directly. 
 
d- When cluing one or more VALUABLE cards in a player’s hand, it means that there is at least one playable card in EVERY slot that was touched by the clue. 
 * Suggestion: the slot of every previously unclued card that was touched by the clue. If every card was already clued, then every affected card. 

e- After witnessing a play-hint, every player (except the one giving the play-hint) MUST make a note of it. If a player observes that no other player has a playable card in this slot, it means they have the playable cards. They write down a play-hint on this card. Otherwise, they MUST still make a note.

Indeed, if a player with a playable card in this slot does not play this card when he had to, it means that they, too, have a playable card. They MUST then add a play-hint to their card. 

f[advanced, letting the clue tick]- In a situation where a single play-clue was given to signal two or more cards, the last player with a playable card will know (by the reasoning in 4e). They MAY choose to NOT play, to inform the other players that they, too, have a playable card. They also write down the play-hint on their card. The initial play hint is considered acknowledged and acted upon, and this non-play is considered a NEW play-hint for the other players. 
* Letting the clue tick may ONLY affect the cards that were in the target slot at the time the clue was given. 

g- Letting the clue tick MAY be used to inform the clue-giver that they, too, have a playable card in the affected slot. 

h[special]- If Alice played or discarded, and a playable card arrived in slot x, Bob MUST NOT discard their card in slot x. This is because they may have a valuable card in slot x that no one had the opportunity to clue before. They MAY give up on play-hint Alice’s card, or they MAY play-hint it provided they do not discard. 

i- If several cards of the same player are touched, they MUST be played from newest to oldest. 
 * Any ordering convention is acceptable provided it is agreed upon beforehand. 
 * If this is not the correct order, a fix clue must be used (see "Fix clue".)


# 5. Trash clue

a- A trash clue is a clue that everyone agrees is not a play hint. Its sole purpose is to express that the clue giver has nothing better to do. 

b- A 1 clue is ALWAYS a trash clue, by convention. (It is thus a good idea to keep at least one 1 among all players’ hands.)

c- A clue that touches at least one unplayable card is ONLY a trash clue if, after receiving the clue, the receiver KNOWS that at least one of the affected cards is trash. The receiver MUST then mark all affected cards as known trash. If the receiver does not know that at least one of the affected cards is trash, it is a normal play clue. 
 * Ex: Filling in a clued card that could (by GTP) be valuable, and revealing that it is not. This is a trash clue.
 ** ?? If the card is not yet played, if the other copy is marked and in another player’s hand, it is a trash clue, and a "gentleman discard" is allowed. ??
 * Ex: Every 2 is played. Alice clues 2. This is a trash clue. 
 * Ex: Every 2 but the blue one is played. Alice clues 2 on a previously unclued card. This is NOT a trash clue, and in fact, it reveals that the clued 2 is the b2. To everyone else, it is a play-hint on b2, and only on b2. If there is another playable card in the b2 slot, the holder of the clued b2 MAY let the clue tick. 
 * It is not a good idea to give a trash clue that will not be interpreted as a trash clue by the clue receiver, and then to fix it. Indeed, it may be interpreted as a play clue, then a fix clue: they will play the other cards. It is also very clue-consuming. 

d[??]- Known trash MAY be discarded without it giving any information whatsoever. It MUST NOT be interpreted as a play hint. (Let us call it a "Trash discard".)


# 6. Fix clue

a- A fix clue is a clue that affects a card that is about to be played, and reveals that it is not playable.

b- Fix clues MUST NOT be taken as a play clue, but only as preventing a misplay. They MAY touch other cards, in which case they SHOULD touch only valuable cards, or fill in trash cards, or otherwise give useful information to the receiving player.

c- The fixed player MUST erase the card they are about to play from the play queue, and proceed with the next item. 

 * Ex: Fresh game. Alice clues three red to Cathy; there is no non-play-hinted playable card in anyone’s hand but Cathy, so Cathy knows the play hints are for her. Cathy would play them from left to right. Immediately after Alice, Bob clues the left-most one as a 5 (possibly touching another 5); it is a fix clue, so no one interprets it as a play hint for them. Cathy would then play the middle red (and place r1), then the right-most red (and play r2), then stop there. 

d- Fix clues MAY be used whenever there is a reasonable suspicion that a player was play-hinted and the play-hints will resolve in the wrong order.
 * Ex: Fresh game. Alice clues Donald’s slots 3 and 4. Bob has y1 in slot 3. Cathy has g2 in slot 3 and g1 in slot 4. 
 * Cathy interprets this as a play hint on Bob’s slot 3 and her slot 4. 
 * Bob interprets this as a play hint on Cathy’s slot 3 and 4. But from his perspective, Cathy will try to play g2 first. He thus gives a fix clue, e.g. "2" clue to Cathy. This is a clue that affects at least one of the slots that, from his perspective, Cathy will try to play - in such a way that, if Cathy removes the affected slots from her play queue, then she will play a playable card. It does not have to make the card visibly unplayable - affecting the card is enough. 
 * ?? Interpret this situation and how it can resolve, and whether there are ambiguities. ??

?? Allow other fix moves ??
?? It is not a good idea to allow "stomping" on a clue to be a fix clue, since it could be interpreted as a finesse. ??


# 8. What to do when stuck

# 8.1. No clue

a- If Alice has no play-hinted card and no remaining clue. She thus MUST discard. 
 * If she has a known trash card, she MAY discard it. This will be interpreted as a trash discard, that does not give any information.
 * If she has a known trash card, she MAY discard another, non-known trash card. This will be interpreted as a play hint.
 * If she has NO known trash card, she MUST discard her newest non-clued card (because if it was playable, it would have been finessed).

b- Players who anticipate this behavior and notice that it will lead to the discard of a CRITICAL card MUST prevent this situation from happening, by trash discards or other means. 
 * ?? In the most extreme case, fix clue ??


# 8.2. Alice gave a trash clue, and Bob has nothing to do

We do not want to keep giving trash clues: this would exhaust the clue bank without bringing in any new card. 

a- Trash discards SHOULD be preferred to trash clues when the game is poor in playable cards. Most likely, in this situation, Alice has no known trash. 

b- If Bob has known trash, he MUST discard it (in any order). This signals that he has nothing to do, but is not a play hint. 
 * If Bob does not do that but instead, discards a non-known trash card or gives a clue, it should be interpreted as a normal play hint. 

c- Otherwise, if Bob gives a second trash clue, SPECIAL SITUATION. Suggestion:
 * If Cathy also has nothing to do, but even if she has known trash, she MUST give a clue that reveals new trash cards. The affected cards (unless filled-in as obviously valuable) MUST be considered known trash.
 * If Cathy has something to play or hint at, she does so. 
 * More generally, the first person to have nothing to do could give a trash clue. The clue receiver will know it is trash if there are no visible playable cards in this position. The clue receiver MUST NOT have received any new card since Alice and Bob gave their consecutive trash clues, or it MUST be clear to them that it is a trash clue, by revealing that at least one of the affected cards is trash (otherwise they MUST interpret it as a play hint on the clued cards). 
 * ?? How does it interact with "Letting someone else give a clue" ??




# [advanced] Letting someone else give a clue

Ex: Cathy has exactly one non-play-hinted playable card, which is in slot x. 
* If Bob has a valuable card in slot x, Alice SHOULD save it. Cathy would know she was play-hinted, and Bob’s card would be out of danger. 
* If Bob has a trash card in slot x, Alice SHOULD do something unrelated. Bob, seeing that his slot x card was not saved, now knows that his slot x card is safe to discard. He SHOULD discard.
* Bob should exercise his better judgment when doing so: it may be that Alice had something more urgent to do, e.g. a fix clue to give. In this case they should either give a play-hint without discarding, or let someone else give the play-hint.
* We generalize to the following heuristic: 

a- Giving a play-hint on a card SHOULD be left to the last player (before the card holder) that has trash in this slot. 


# [very advanced] Special trash

Ex: Cathy has exactly one non-play-hinted playable card, which is in slot x. Alice gives a trash clue. 
* Bob then knows for certain he has a trash card in slot x. This card is now a known trash card for everyone but Cathy. Since Cathy does not know it is a trash card, she would interpret a discard of this card as a play clue on her. 
* A very daring Bob could use this information asymetry to his advantage - since the players other than Cathy will not interpret a discard of this trash card as a play hint, he now has a play clue that ONLY affects Cathy, and may be subsequently used to trigger finesses. 
* Otherwise, it is often safer to discard the trash card immediately, especially if Cathy might discard the card in her slot x. 
* This "special trash" becomes a normal known trash once Cathy becomes certain that Bob knows it is trash. 
* If Bob decides not to discard the card, the other players MAY give a clue (to allow Bob to keep his special trash) or, if they decide that Bob’s daring is too much, they MAY decide to let Bob give the clue anyway. 


# [advanced] Finesses

Finesses are tricky, since play hints will be interpreted as "there is a playable card in this slot". Every player up to the target of the finesse MUST thus know that their card in the affected slot is in fact not playable. I would advise against unless it is clear that no other interpretation is possible. 


